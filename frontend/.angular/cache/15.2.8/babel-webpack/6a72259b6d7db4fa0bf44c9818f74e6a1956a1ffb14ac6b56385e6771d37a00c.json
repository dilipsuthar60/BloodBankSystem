{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { map, takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngneat/hot-toast\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../blood-bank.service\";\nimport * as i4 from \"@angular/common\";\nfunction DonorHomeComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"div\", 11);\n    i0.ɵɵelement(2, \"img\", 12);\n    i0.ɵɵelementStart(3, \"div\", 13)(4, \"h5\", 14);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 15)(7, \"div\", 16)(8, \"p\", 17);\n    i0.ɵɵtext(9, \"Organised By:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 18);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 16)(13, \"p\", 17);\n    i0.ɵɵtext(14, \"Location:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\", 18);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 19)(18, \"p\", 17);\n    i0.ɵɵtext(19, \"Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"p\", 18);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"p\", 20);\n    i0.ɵɵtext(23, \"Timings: \");\n    i0.ɵɵelementStart(24, \"span\", 21);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(25, \"svg\", 22);\n    i0.ɵɵelement(26, \"path\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"- \");\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(29, \"span\", 24);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(30, \"svg\", 22);\n    i0.ɵɵelement(31, \"path\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(33, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function DonorHomeComponent_div_13_Template_button_click_33_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const camp_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onButtonClick(camp_r1.id));\n    });\n    i0.ɵɵpipe(34, \"async\");\n    i0.ɵɵpipe(35, \"async\");\n    i0.ɵɵtext(36);\n    i0.ɵɵpipe(37, \"async\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const camp_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(camp_r1.name);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(camp_r1.createdBy);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(camp_r1.location);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(camp_r1.date);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.convertTo12HourFormat(camp_r1.startTime), \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.convertTo12HourFormat(camp_r1.endTime), \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"button\", i0.ɵɵpipeBind1(34, 11, ctx_r0.isRegistered(camp_r1.id)))(\"button-u\", i0.ɵɵpipeBind1(35, 13, ctx_r0.isRegistered(camp_r1.id)));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(37, 15, ctx_r0.isRegistered(camp_r1.id)) ? \"Unregister Yourself\" : \"Register Yourself\", \" \");\n  }\n}\nexport class DonorHomeComponent {\n  constructor(toast, router, route, bloodBankService) {\n    this.toast = toast;\n    this.router = router;\n    this.route = route;\n    this.bloodBankService = bloodBankService;\n    this.unsubscribe$ = new Subject();\n  }\n  ngOnInit() {\n    this.fetchCamps();\n  }\n  ngOnDestroy() {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n  fetchCamps() {\n    this.bloodBankService.getCamps().pipe(takeUntil(this.unsubscribe$)).subscribe(data => {\n      this.camps = data;\n      console.log(data);\n    }, error => {\n      console.error(error);\n    });\n  }\n  convertTo12HourFormat(timeString) {\n    const [hours, minutes] = timeString.split(':');\n    let formattedTime;\n    let period;\n    if (Number(hours) < 12) {\n      formattedTime = Number(hours);\n      period = 'AM';\n    } else {\n      formattedTime = Number(hours) % 12;\n      period = 'PM';\n    }\n    return `${formattedTime}:${minutes} ${period}`;\n  }\n  isRegistered(campId) {\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n    return this.bloodBankService.isRegister(item).pipe(takeUntil(this.unsubscribe$), map(data => data.isRegistered));\n  }\n  onButtonClick(camp) {\n    this.isRegistered(camp.id).pipe(takeUntil(this.unsubscribe$)).subscribe(isRegistered => {\n      if (isRegistered) {\n        this.unregisterCamp(camp);\n      } else {\n        this.registerCamp(camp);\n      }\n    }, error => {\n      console.error(error);\n    });\n  }\n  registerCamp(camp) {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n    this.bloodBankService.registerDonor(item).pipe(takeUntil(this.unsubscribe$)).subscribe(data => {\n      this.toast.success('Registered successfully');\n    }, error => {\n      this.toast.error(error.error.error.message);\n    });\n  }\n  unregisterCamp(camp) {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n    this.bloodBankService.unregisterDonor(item).pipe(takeUntil(this.unsubscribe$)).subscribe(data => {\n      this.toast.success('Unregistered successfully');\n    }, error => {\n      this.toast.error(error.error.error.message);\n    });\n  }\n}\nDonorHomeComponent.ɵfac = function DonorHomeComponent_Factory(t) {\n  return new (t || DonorHomeComponent)(i0.ɵɵdirectiveInject(i1.HotToastService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.BloodBankService));\n};\nDonorHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DonorHomeComponent,\n  selectors: [[\"app-donor-home\"]],\n  decls: 14,\n  vars: 1,\n  consts: [[1, \"relative\"], [1, \"absolute\", \"left-[30%]\", \"top-12\", \"text-center\", \"text-5xl\", \"uppercase\", \"font-bold\", \"leading-9\", \"tracking-wide\", \"text-rose-700\"], [1, \"absolute\", \"right-[32%]\", \"mr-2\", \"top-12\", \"text-center\", \"text-5xl\", \"uppercase\", \"font-bold\", \"leading-9\", \"tracking-wide\", \"text-rose-700\"], [1, \"heart\"], [1, \"heartbeat\"], [1, \"sm:mx-auto\", \"sm:w-full\", \"sm:max-w-sm\"], [\"src\", \"https://png.pngtree.com/element_our/20200609/ourlarge/pngtree-donate-blood-image_2224076.jpg\", \"alt\", \"Your Company\", 1, \"mx-auto\", \"mt-2\", \"w-32\", \"h-28\", \"shadow-danger\", \"shadow\"], [1, \"uppercase\", \"underline\", \"text-3xl\", \"my-2\", \"mt-4\", \"text-center\", \"text-rose-800\"], [1, \"flex\", \"flex-wrap\", \"justify-center\", \"overflow-hidden\"], [\"class\", \"m-4 shadow-lg\", 4, \"ngFor\", \"ngForOf\"], [1, \"m-4\", \"shadow-lg\"], [1, \"w-80\", \"border\", \"border-gray-200\", \"rounded-lg\", \"shadow\"], [\"src\", \"https://gozo.news/wp-content/uploads/2019/02/Save_Life_Give_Blood_Malta.png\", \"alt\", \"\", 1, \"rounded-t-lg\", \"ml-2\", \"h-36\", \"border-b-2\", \"border-b-rose-700\"], [1, \"p-5\", \"drop-shadow-sm\"], [1, \"mb-4\", \"text-xl\", \"uppercase\", \"underline\", \"text-center\", \"font-bold\", \"tracking-tight\", \"text-gray-900\"], [1, \"flex\", \"flex-col\"], [1, \"flex\", \"items-start\", \"mb-4\"], [1, \"mr-4\", \"font-bold\", \"text-gray-600\"], [1, \"font-normal\", \"text-gray-500\"], [1, \"flex\", \"items-start\", \"mb-3\"], [1, \"mb-4\", \"font-bold\", \"text-gray-600\"], [1, \"bg-gray-100\", \"text-gray-800\", \"text-xs\", \"ml-2\", \"font-medium\", \"inline-flex\", \"items-center\", \"px-2.5\", \"py-0.5\", \"rounded\", \"mr-2\", \"border\", \"border-gray-500\"], [\"aria-hidden\", \"true\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 20 20\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"w-3\", \"h-3\", \"mr-1\"], [\"fill-rule\", \"evenodd\", \"d\", \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\", \"clip-rule\", \"evenodd\"], [1, \"bg-gray-100\", \"text-gray-800\", \"text-xs\", \"font-medium\", \"inline-flex\", \"items-center\", \"px-2.5\", \"py-0.5\", \"rounded\", \"border\", \"border-gray-500\"], [1, \"mt-2\", \"w-full\", \"h-10\", \"text-center\", \"font-bold\", \"cursor-pointer\", 3, \"click\"]],\n  template: function DonorHomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n      i0.ɵɵtext(2, \"Blood\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"h1\", 2);\n      i0.ɵɵtext(4, \"Bank \");\n      i0.ɵɵelementStart(5, \"span\", 3)(6, \"span\", 4);\n      i0.ɵɵtext(7, \"\\uD83E\\uDE78\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"div\", 5);\n      i0.ɵɵelement(9, \"img\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"h1\", 7);\n      i0.ɵɵtext(11, \"Camps List\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 8);\n      i0.ɵɵtemplate(13, DonorHomeComponent_div_13_Template, 38, 17, \"div\", 9);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.camps);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkb25vci1ob21lLmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZG9ub3ItaG9tZS9kb25vci1ob21lLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLHdLQUF3SyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Subject","map","takeUntil","i0","DonorHomeComponent","constructor","toast","router","route","bloodBankService","ngOnInit","fetchCamps","ngOnDestroy","unsubscribe$","next","complete","getCamps","pipe","subscribe","data","camps","console","log","error","convertTo12HourFormat","timeString","hours","minutes","split","formattedTime","period","Number","isRegistered","campId","donorId","snapshot","paramMap","get","item","isRegister","onButtonClick","camp","id","unregisterCamp","registerCamp","registerDonor","success","message","unregisterDonor","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\hp\\Documents\\Arcs Infotech\\blood-bank-system\\src\\app\\donor-home\\donor-home.component.ts","C:\\Users\\hp\\Documents\\Arcs Infotech\\blood-bank-system\\src\\app\\donor-home\\donor-home.component.html"],"sourcesContent":["// import { Component } from '@angular/core';\n// import { ActivatedRoute, Router } from '@angular/router';\n// import { HotToastService } from '@ngneat/hot-toast';\n// import { BloodBankService } from '../blood-bank.service';\n// import { Observable, map } from 'rxjs';\n\n// @Component({\n//   selector: 'app-donor-home',\n//   templateUrl: './donor-home.component.html',\n//   styleUrls: ['./donor-home.component.css']\n// })\n// export class DonorHomeComponent {\n//   camps: any;\n\n//   constructor(\n//     private toast: HotToastService,\n//     private router: Router,\n//     private route: ActivatedRoute,\n//     private bloodBankService: BloodBankService\n//   ) {}\n\n//   ngOnInit(): void {\n//     this.postCamps();\n//   }\n\n//   postCamps(): void {\n//     this.bloodBankService.getCamps().subscribe(\n//       (data: any) => {\n//         this.camps = data\n//         console.log(data)\n//       }\n//     )\n//   }\n\n//   convertTo12HourFormat(timeString: any): string {\n//     const [hours, minutes] = timeString.split(\":\");\n//     let formattedTime: number;\n//     let period: string;\n  \n//     if (hours < 12) {\n//       formattedTime = hours;\n//       period = \"AM\";\n//     } else {\n//       formattedTime = hours % 12;\n//       period = \"PM\";\n//     }\n  \n//     return `${formattedTime}:${minutes} ${period}`;\n//   }\n\n\n//   isRegistered(camp: any): Observable<boolean> {\n//     const campId = camp.id;\n//     const donorId = Number(this.route.snapshot.paramMap.get('id'));\n//     const item = {\n//       campId,\n//       donorId\n//     };\n  \n//     return this.bloodBankService.isRegister(item).pipe(\n//       map((data: any) => data.isRegistered)\n//     );\n//   }\n  \n//   onButtonClick(camp: any) {\n//     this.isRegistered(camp).subscribe(\n//       (isRegistered: boolean) => {\n//         // console.log(isRegistered)\n//         if (isRegistered) {\n//           this.unregisterCamp(camp);\n//         } else {\n//           this.registerCamp(camp);\n//         }\n//       },\n//       (error: any) => {\n//         console.error(error);\n//       }\n//     );\n//   }\n  \n//   registerCamp(camp: any) {\n//     const campId = camp.id;\n//     const donorId = Number(this.route.snapshot.paramMap.get('id'));\n//     const item = {\n//       campId,\n//       donorId\n//     };\n\n//     this.bloodBankService.registerDonor(item).subscribe(\n//       (data: any) => {\n//         // console.log(data)\n//         this.toast.success('Registered successfully');\n//       },\n//       (error: any) => {\n//         // console.log(error)\n//         this.toast.error(error.error.error.message);\n//       }\n//     );\n//   }\n  \n//   unregisterCamp(camp: any) {\n//     const campId = camp.id;\n//     const donorId = Number(this.route.snapshot.paramMap.get('id'));\n//     const item = {\n//       campId,\n//       donorId\n//     };\n\n//     this.bloodBankService.unregisterDonor(item).subscribe(\n//       (data: any) => {\n//         // console.log(data)\n//         this.toast.success('Unregistered successfully');\n//       },\n//       (error: any) => {\n//         this.toast.error(error.error.error.message);\n//       }\n//     );\n//   }\n// }\nimport { Component, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HotToastService } from '@ngneat/hot-toast';\nimport { BloodBankService } from '../blood-bank.service';\nimport { Observable, Subject } from 'rxjs';\nimport { map, takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-donor-home',\n  templateUrl: './donor-home.component.html',\n  styleUrls: ['./donor-home.component.css']\n})\nexport class DonorHomeComponent implements OnDestroy {\n  camps: any;\n  private unsubscribe$ = new Subject<void>();\n\n  constructor(\n    private toast: HotToastService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private bloodBankService: BloodBankService\n  ) {}\n\n  ngOnInit(): void {\n    this.fetchCamps();\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n\n  fetchCamps(): void {\n    this.bloodBankService.getCamps()\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (data: any) => {\n          this.camps = data;\n          console.log(data);\n        },\n        (error: any) => {\n          console.error(error);\n        }\n      );\n  }\n\n  convertTo12HourFormat(timeString: string): string {\n    const [hours, minutes] = timeString.split(':');\n    let formattedTime: number;\n    let period: string;\n\n    if (Number(hours) < 12) {\n      formattedTime = Number(hours);\n      period = 'AM';\n    } else {\n      formattedTime = Number(hours) % 12;\n      period = 'PM';\n    }\n\n    return `${formattedTime}:${minutes} ${period}`;\n  }\n\n  isRegistered(campId: number): Observable<boolean> {\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n\n    return this.bloodBankService.isRegister(item)\n      .pipe(\n        takeUntil(this.unsubscribe$),\n        map((data: any) => data.isRegistered)\n      );\n  }\n\n  onButtonClick(camp: any) {\n    this.isRegistered(camp.id)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (isRegistered: boolean) => {\n          if (isRegistered) {\n            this.unregisterCamp(camp);\n          } else {\n            this.registerCamp(camp);\n          }\n        },\n        (error: any) => {\n          console.error(error);\n        }\n      );\n  }\n\n  registerCamp(camp: any) {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n\n    this.bloodBankService.registerDonor(item)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (data: any) => {\n          this.toast.success('Registered successfully');\n        },\n        (error: any) => {\n          this.toast.error(error.error.error.message);\n        }\n      );\n  }\n\n  unregisterCamp(camp: any) {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n\n    this.bloodBankService.unregisterDonor(item)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (data: any) => {\n          this.toast.success('Unregistered successfully');\n        },\n        (error: any) => {\n          this.toast.error(error.error.error.message);\n        }\n      );\n  }\n}\n","<div class=\"relative\">\n  <h1 class=\"absolute left-[30%] top-12 text-center text-5xl uppercase font-bold leading-9 tracking-wide text-rose-700\">Blood</h1>\n  <h1 class=\"absolute right-[32%] mr-2 top-12 text-center text-5xl uppercase font-bold leading-9 tracking-wide text-rose-700\">Bank\n    <span class=\"heart\"><span class=\"heartbeat\">🩸</span></span>\n  </h1>\n  <div class=\"sm:mx-auto sm:w-full sm:max-w-sm\">\n    <img\n      class=\"mx-auto mt-2 w-32 h-28 shadow-danger shadow\"\n      src=\"https://png.pngtree.com/element_our/20200609/ourlarge/pngtree-donate-blood-image_2224076.jpg\"\n      alt=\"Your Company\"\n    />\n  </div>\n  <h1 class=\"uppercase underline text-3xl my-2 mt-4 text-center text-rose-800\">Camps List</h1>\n</div>\n\n\n\n\n<div class=\"flex flex-wrap justify-center overflow-hidden\">\n  <div class=\"m-4 shadow-lg\" *ngFor=\"let camp of camps\">\n    <div class=\"w-80 border border-gray-200 rounded-lg shadow\">\n      <img class=\"rounded-t-lg ml-2 h-36 border-b-2 border-b-rose-700\" src=\"https://gozo.news/wp-content/uploads/2019/02/Save_Life_Give_Blood_Malta.png\" alt=\"\" />\n      <div class=\"p-5 drop-shadow-sm\">\n        <h5 class=\"mb-4 text-xl uppercase underline text-center font-bold tracking-tight text-gray-900\">{{ camp.name }}</h5>\n        <div class=\"flex flex-col\">\n          <div class=\"flex items-start mb-4\">\n            <p class=\"mr-4 font-bold text-gray-600\">Organised By:</p>\n            <p class=\"font-normal text-gray-500\">{{ camp.createdBy }}</p>\n          </div>\n          <div class=\"flex items-start mb-4\">\n            <p class=\"mr-4 font-bold text-gray-600\">Location:</p>\n            <p class=\"font-normal text-gray-500\">{{ camp.location }}</p>\n          </div>\n          <div class=\"flex items-start mb-3\">\n            <p class=\"mr-4 font-bold text-gray-600\">Date:</p>\n            <p class=\"font-normal text-gray-500\">{{ camp.date }}</p>\n          </div>\n        </div>\n\n          <p class=\"mb-4 font-bold text-gray-600\">Timings:\n            <span class=\"bg-gray-100 text-gray-800 text-xs ml-2 font-medium inline-flex items-center px-2.5 py-0.5 rounded mr-2 border border-gray-500\">\n              <svg aria-hidden=\"true\" class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clip-rule=\"evenodd\"></path></svg>\n              {{ convertTo12HourFormat(camp.startTime) }}\n            </span>-\n            <span class=\"bg-gray-100 text-gray-800 text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded border border-gray-500\">\n              <svg aria-hidden=\"true\" class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clip-rule=\"evenodd\"></path></svg>\n              {{ convertTo12HourFormat(camp.endTime) }}\n            </span>\n          </p>\n          <!-- <button class=\"button mt-2 w-full h-10 text-center font-bold cursor-pointer\" \n            (click)=\"onButtonClick(camp)\">\n            Register YourSelf\n          </button> -->\n          <button class=\"mt-2 w-full h-10 text-center font-bold cursor-pointer\"\n              [class.button]=\"isRegistered(camp.id) | async\"\n              [class.button-u]=\"isRegistered(camp.id) | async\"\n              (click)=\"onButtonClick(camp.id)\">\n        {{ (isRegistered(camp.id) | async) ? 'Unregister Yourself' : 'Register Yourself' }}\n      </button>\n        </div>\n    </div>\n  </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}