{"ast":null,"code":"import { map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngneat/hot-toast\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../blood-bank.service\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = function (a0, a1) {\n  return {\n    \"button\": a0,\n    \"button-u\": a1\n  };\n};\nfunction DonorHomeComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 10)(1, \"div\", 11);\n    i0.ÉµÉµelement(2, \"img\", 12);\n    i0.ÉµÉµelementStart(3, \"div\", 13)(4, \"h5\", 14);\n    i0.ÉµÉµtext(5);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(6, \"div\", 15)(7, \"div\", 16)(8, \"p\", 17);\n    i0.ÉµÉµtext(9, \"Organised By:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(10, \"p\", 18);\n    i0.ÉµÉµtext(11);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(12, \"div\", 16)(13, \"p\", 17);\n    i0.ÉµÉµtext(14, \"Location:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(15, \"p\", 18);\n    i0.ÉµÉµtext(16);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(17, \"div\", 19)(18, \"p\", 17);\n    i0.ÉµÉµtext(19, \"Date:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(20, \"p\", 18);\n    i0.ÉµÉµtext(21);\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelementStart(22, \"p\", 20);\n    i0.ÉµÉµtext(23, \"Timings: \");\n    i0.ÉµÉµelementStart(24, \"span\", 21);\n    i0.ÉµÉµnamespaceSVG();\n    i0.ÉµÉµelementStart(25, \"svg\", 22);\n    i0.ÉµÉµelement(26, \"path\", 23);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(27);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(28, \"- \");\n    i0.ÉµÉµnamespaceHTML();\n    i0.ÉµÉµelementStart(29, \"span\", 24);\n    i0.ÉµÉµnamespaceSVG();\n    i0.ÉµÉµelementStart(30, \"svg\", 22);\n    i0.ÉµÉµelement(31, \"path\", 23);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(32);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµnamespaceHTML();\n    i0.ÉµÉµelementStart(33, \"button\", 25);\n    i0.ÉµÉµlistener(\"click\", function DonorHomeComponent_div_13_Template_button_click_33_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r3);\n      const camp_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.onButtonClick(camp_r1));\n    });\n    i0.ÉµÉµpipe(34, \"async\");\n    i0.ÉµÉµpipe(35, \"async\");\n    i0.ÉµÉµtext(36);\n    i0.ÉµÉµpipe(37, \"async\");\n    i0.ÉµÉµelementEnd()()()();\n  }\n  if (rf & 2) {\n    const camp_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(camp_r1.name);\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµtextInterpolate(camp_r1.createdBy);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(camp_r1.location);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(camp_r1.date);\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r0.convertTo12HourFormat(camp_r1.startTime), \" \");\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r0.convertTo12HourFormat(camp_r1.endTime), \" \");\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngClass\", i0.ÉµÉµpureFunction2(14, _c0, !i0.ÉµÉµpipeBind1(34, 8, ctx_r0.isRegistered(camp_r1)), i0.ÉµÉµpipeBind1(35, 10, ctx_r0.isRegistered(camp_r1))));\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate1(\" \", i0.ÉµÉµpipeBind1(37, 12, ctx_r0.isRegistered(camp_r1)) ? \"Unregister\" : \"Register\", \" \");\n  }\n}\nexport class DonorHomeComponent {\n  constructor(toast, router, route, bloodBankService) {\n    this.toast = toast;\n    this.router = router;\n    this.route = route;\n    this.bloodBankService = bloodBankService;\n  }\n  ngOnInit() {\n    this.getRegisterationStatus;\n    this.postCamps();\n  }\n  postCamps() {\n    this.bloodBankService.getCamps().subscribe(data => {\n      this.camps = data;\n      console.log(data);\n    });\n  }\n  convertTo12HourFormat(timeString) {\n    const [hours, minutes] = timeString.split(\":\");\n    let formattedTime;\n    let period;\n    if (hours < 12) {\n      formattedTime = hours;\n      period = \"AM\";\n    } else {\n      formattedTime = hours % 12;\n      period = \"PM\";\n    }\n    return `${formattedTime}:${minutes} ${period}`;\n  }\n  isRegistered(camp) {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n    return this.bloodBankService.isRegister(item).pipe(map(data => data.isRegistered));\n  }\n  onButtonClick(camp) {\n    this.getRegisterationStatus(camp);\n    this.isRegistered(camp).subscribe(isRegistered => {\n      // console.log(isRegistered)\n      if (isRegistered) {\n        this.unregisterCamp(camp);\n      } else {\n        this.registerCamp(camp);\n      }\n    }, error => {\n      console.error(error);\n    });\n  }\n  getRegisterationStatus(camp) {\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    this.bloodBankService.campsRegistered(donorId).subscribe(data => {\n      // console.log(data)\n      this.registeredCamps = data;\n    });\n  }\n  registerCamp(camp) {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n    this.bloodBankService.registerDonor(item).subscribe(data => {\n      // console.log(data)\n      this.toast.success('Registered successfully');\n    }, error => {\n      // console.log(error)\n      this.toast.error(error.error.error.message);\n    });\n  }\n  unregisterCamp(camp) {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n    this.bloodBankService.unregisterDonor(item).subscribe(data => {\n      // console.log(data)\n      this.toast.success('Unregistered successfully');\n    }, error => {\n      this.toast.error(error.error.error.message);\n    });\n  }\n}\nDonorHomeComponent.Éµfac = function DonorHomeComponent_Factory(t) {\n  return new (t || DonorHomeComponent)(i0.ÉµÉµdirectiveInject(i1.HotToastService), i0.ÉµÉµdirectiveInject(i2.Router), i0.ÉµÉµdirectiveInject(i2.ActivatedRoute), i0.ÉµÉµdirectiveInject(i3.BloodBankService));\n};\nDonorHomeComponent.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n  type: DonorHomeComponent,\n  selectors: [[\"app-donor-home\"]],\n  decls: 14,\n  vars: 1,\n  consts: [[1, \"relative\"], [1, \"absolute\", \"left-[30%]\", \"top-12\", \"text-center\", \"text-5xl\", \"uppercase\", \"font-bold\", \"leading-9\", \"tracking-wide\", \"text-rose-700\"], [1, \"absolute\", \"right-[32%]\", \"mr-2\", \"top-12\", \"text-center\", \"text-5xl\", \"uppercase\", \"font-bold\", \"leading-9\", \"tracking-wide\", \"text-rose-700\"], [1, \"heart\"], [1, \"heartbeat\"], [1, \"sm:mx-auto\", \"sm:w-full\", \"sm:max-w-sm\"], [\"src\", \"https://png.pngtree.com/element_our/20200609/ourlarge/pngtree-donate-blood-image_2224076.jpg\", \"alt\", \"Your Company\", 1, \"mx-auto\", \"mt-2\", \"w-32\", \"h-28\", \"shadow-danger\", \"shadow\"], [1, \"uppercase\", \"underline\", \"text-3xl\", \"my-2\", \"mt-4\", \"text-center\", \"text-rose-800\"], [1, \"flex\", \"flex-wrap\", \"justify-center\", \"overflow-hidden\"], [\"class\", \"m-4 shadow-lg\", 4, \"ngFor\", \"ngForOf\"], [1, \"m-4\", \"shadow-lg\"], [1, \"w-80\", \"border\", \"border-gray-200\", \"rounded-lg\", \"shadow\"], [\"src\", \"https://gozo.news/wp-content/uploads/2019/02/Save_Life_Give_Blood_Malta.png\", \"alt\", \"\", 1, \"rounded-t-lg\", \"ml-2\", \"h-36\", \"border-b-2\", \"border-b-rose-700\"], [1, \"p-5\", \"drop-shadow-sm\"], [1, \"mb-4\", \"text-xl\", \"uppercase\", \"underline\", \"text-center\", \"font-bold\", \"tracking-tight\", \"text-gray-900\"], [1, \"flex\", \"flex-col\"], [1, \"flex\", \"items-start\", \"mb-4\"], [1, \"mr-4\", \"font-bold\", \"text-gray-600\"], [1, \"font-normal\", \"text-gray-500\"], [1, \"flex\", \"items-start\", \"mb-3\"], [1, \"mb-4\", \"font-bold\", \"text-gray-600\"], [1, \"bg-gray-100\", \"text-gray-800\", \"text-xs\", \"ml-2\", \"font-medium\", \"inline-flex\", \"items-center\", \"px-2.5\", \"py-0.5\", \"rounded\", \"mr-2\", \"border\", \"border-gray-500\"], [\"aria-hidden\", \"true\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 20 20\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"w-3\", \"h-3\", \"mr-1\"], [\"fill-rule\", \"evenodd\", \"d\", \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\", \"clip-rule\", \"evenodd\"], [1, \"bg-gray-100\", \"text-gray-800\", \"text-xs\", \"font-medium\", \"inline-flex\", \"items-center\", \"px-2.5\", \"py-0.5\", \"rounded\", \"border\", \"border-gray-500\"], [1, \"mt-2\", \"w-full\", \"h-10\", \"text-center\", \"font-bold\", \"cursor-pointer\", 3, \"ngClass\", \"click\"]],\n  template: function DonorHomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"h1\", 1);\n      i0.ÉµÉµtext(2, \"Blood\");\n      i0.ÉµÉµelementEnd();\n      i0.ÉµÉµelementStart(3, \"h1\", 2);\n      i0.ÉµÉµtext(4, \"Bank \");\n      i0.ÉµÉµelementStart(5, \"span\", 3)(6, \"span\", 4);\n      i0.ÉµÉµtext(7, \"\\uD83E\\uDE78\");\n      i0.ÉµÉµelementEnd()()();\n      i0.ÉµÉµelementStart(8, \"div\", 5);\n      i0.ÉµÉµelement(9, \"img\", 6);\n      i0.ÉµÉµelementEnd();\n      i0.ÉµÉµelementStart(10, \"h1\", 7);\n      i0.ÉµÉµtext(11, \"Camps List\");\n      i0.ÉµÉµelementEnd()();\n      i0.ÉµÉµelementStart(12, \"div\", 8);\n      i0.ÉµÉµtemplate(13, DonorHomeComponent_div_13_Template, 38, 17, \"div\", 9);\n      i0.ÉµÉµelementEnd();\n    }\n    if (rf & 2) {\n      i0.ÉµÉµadvance(13);\n      i0.ÉµÉµproperty(\"ngForOf\", ctx.camps);\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgForOf, i4.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkb25vci1ob21lLmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZG9ub3ItaG9tZS9kb25vci1ob21lLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLHdLQUF3SyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["map","i0","DonorHomeComponent","constructor","toast","router","route","bloodBankService","ngOnInit","getRegisterationStatus","postCamps","getCamps","subscribe","data","camps","console","log","convertTo12HourFormat","timeString","hours","minutes","split","formattedTime","period","isRegistered","camp","campId","id","donorId","Number","snapshot","paramMap","get","item","isRegister","pipe","onButtonClick","unregisterCamp","registerCamp","error","campsRegistered","registeredCamps","registerDonor","success","message","unregisterDonor","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\hp\\Documents\\Arcs Infotech\\blood-bank-system\\src\\app\\donor-home\\donor-home.component.ts","C:\\Users\\hp\\Documents\\Arcs Infotech\\blood-bank-system\\src\\app\\donor-home\\donor-home.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HotToastService } from '@ngneat/hot-toast';\nimport { BloodBankService } from '../blood-bank.service';\nimport { Observable, map } from 'rxjs';\n\n@Component({\n  selector: 'app-donor-home',\n  templateUrl: './donor-home.component.html',\n  styleUrls: ['./donor-home.component.css']\n})\nexport class DonorHomeComponent {\n  registeredCamps: any\n  camps: any;\n\n  constructor(\n    private toast: HotToastService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private bloodBankService: BloodBankService\n  ) {}\n\n  ngOnInit(): void {\n    this.getRegisterationStatus\n    this.postCamps();\n  }\n\n  postCamps(): void {\n    this.bloodBankService.getCamps().subscribe(\n      (data: any) => {\n        this.camps = data\n        console.log(data)\n      }\n    )\n  }\n\n  convertTo12HourFormat(timeString: any): string {\n    const [hours, minutes] = timeString.split(\":\");\n    let formattedTime: number;\n    let period: string;\n  \n    if (hours < 12) {\n      formattedTime = hours;\n      period = \"AM\";\n    } else {\n      formattedTime = hours % 12;\n      period = \"PM\";\n    }\n  \n    return `${formattedTime}:${minutes} ${period}`;\n  }\n\n\n  isRegistered(camp: any): Observable<boolean> {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n  \n    return this.bloodBankService.isRegister(item).pipe(\n      map((data: any) => data.isRegistered)\n    );\n  }\n  \n  onButtonClick(camp: any) {\n    this.getRegisterationStatus(camp)\n    this.isRegistered(camp).subscribe(\n      (isRegistered: boolean) => {\n        // console.log(isRegistered)\n        if (isRegistered) {\n          this.unregisterCamp(camp);\n        } else {\n          this.registerCamp(camp);\n        }\n      },\n      (error: any) => {\n        console.error(error);\n      }\n    );\n  }\n\n  getRegisterationStatus(camp: any) {\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    this.bloodBankService.campsRegistered(donorId).subscribe(\n      (data: any) => {\n        // console.log(data)\n        this.registeredCamps = data;\n      }\n    )\n  }\n  \n  registerCamp(camp: any) {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n\n    this.bloodBankService.registerDonor(item).subscribe(\n      (data: any) => {\n        // console.log(data)\n        this.toast.success('Registered successfully');\n      },\n      (error: any) => {\n        // console.log(error)\n        this.toast.error(error.error.error.message);\n      }\n    );\n  }\n  \n  unregisterCamp(camp: any) {\n    const campId = camp.id;\n    const donorId = Number(this.route.snapshot.paramMap.get('id'));\n    const item = {\n      campId,\n      donorId\n    };\n\n    this.bloodBankService.unregisterDonor(item).subscribe(\n      (data: any) => {\n        // console.log(data)\n        this.toast.success('Unregistered successfully');\n      },\n      (error: any) => {\n        this.toast.error(error.error.error.message);\n      }\n    );\n  }\n}\n","<div class=\"relative\">\n  <h1 class=\"absolute left-[30%] top-12 text-center text-5xl uppercase font-bold leading-9 tracking-wide text-rose-700\">Blood</h1>\n  <h1 class=\"absolute right-[32%] mr-2 top-12 text-center text-5xl uppercase font-bold leading-9 tracking-wide text-rose-700\">Bank\n    <span class=\"heart\"><span class=\"heartbeat\">ðŸ©¸</span></span>\n  </h1>\n  <div class=\"sm:mx-auto sm:w-full sm:max-w-sm\">\n    <img\n      class=\"mx-auto mt-2 w-32 h-28 shadow-danger shadow\"\n      src=\"https://png.pngtree.com/element_our/20200609/ourlarge/pngtree-donate-blood-image_2224076.jpg\"\n      alt=\"Your Company\"\n    />\n  </div>\n  <h1 class=\"uppercase underline text-3xl my-2 mt-4 text-center text-rose-800\">Camps List</h1>\n</div>\n\n\n\n\n<div class=\"flex flex-wrap justify-center overflow-hidden\">\n  <div class=\"m-4 shadow-lg\" *ngFor=\"let camp of camps\">\n    <div class=\"w-80 border border-gray-200 rounded-lg shadow\">\n      <img class=\"rounded-t-lg ml-2 h-36 border-b-2 border-b-rose-700\" src=\"https://gozo.news/wp-content/uploads/2019/02/Save_Life_Give_Blood_Malta.png\" alt=\"\" />\n      <div class=\"p-5 drop-shadow-sm\">\n        <h5 class=\"mb-4 text-xl uppercase underline text-center font-bold tracking-tight text-gray-900\">{{ camp.name }}</h5>\n        <div class=\"flex flex-col\">\n          <div class=\"flex items-start mb-4\">\n            <p class=\"mr-4 font-bold text-gray-600\">Organised By:</p>\n            <p class=\"font-normal text-gray-500\">{{ camp.createdBy }}</p>\n          </div>\n          <div class=\"flex items-start mb-4\">\n            <p class=\"mr-4 font-bold text-gray-600\">Location:</p>\n            <p class=\"font-normal text-gray-500\">{{ camp.location }}</p>\n          </div>\n          <div class=\"flex items-start mb-3\">\n            <p class=\"mr-4 font-bold text-gray-600\">Date:</p>\n            <p class=\"font-normal text-gray-500\">{{ camp.date }}</p>\n          </div>\n        </div>\n\n          <p class=\"mb-4 font-bold text-gray-600\">Timings:\n            <span class=\"bg-gray-100 text-gray-800 text-xs ml-2 font-medium inline-flex items-center px-2.5 py-0.5 rounded mr-2 border border-gray-500\">\n              <svg aria-hidden=\"true\" class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clip-rule=\"evenodd\"></path></svg>\n              {{ convertTo12HourFormat(camp.startTime) }}\n            </span>-\n            <span class=\"bg-gray-100 text-gray-800 text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded border border-gray-500\">\n              <svg aria-hidden=\"true\" class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clip-rule=\"evenodd\"></path></svg>\n              {{ convertTo12HourFormat(camp.endTime) }}\n            </span>\n          </p>\n          <!-- <button class=\"mt-2 w-full h-10 text-center font-bold cursor-pointer\"\n            (click)=\"onButtonClick(camp)\">\n          </button> -->\n          <button class=\"mt-2 w-full h-10 text-center font-bold cursor-pointer\"\n            (click)=\"onButtonClick(camp)\"\n            [ngClass]=\"{\n              'button': !(isRegistered(camp) | async),\n              'button-u': isRegistered(camp) | async\n            }\">\n            {{ (isRegistered(camp) | async) ? 'Unregister' : 'Register' }}\n          </button>\n        </div>\n    </div>\n  </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}